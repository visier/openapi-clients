# Generated with protoc-gen-openapi
# https://github.com/google/gnostic/tree/master/cmd/protoc-gen-openapi

openapi: 3.0.3
info:
  title: Visier Data Version Export APIs
  description: Visier APIs for exporting data version information, such as tables, columns, and file information, in CSV format.
  license:
    name: Apache License, Version 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0
  version: 22222222.99201.1331
paths:
  /v1alpha/data/data-version-exports/data-versions:
    get:
      tags:
        - DataVersionExportV1Alpha
      summary: Retrieve a list of all data versions
      description: |-
        This API allows you to retrieve a list of all data versions in the tenant.

         **Note:** This API is in **alpha**. While in alpha, APIs may change in a breaking way without notice; functionality may be removed, and no deprecation notices will be issued.
         If you are interested in using this API, please contact your Customer Success Manager (CSM).
      operationId: DataVersionExportV1Alpha_GetAvailableDataVersions
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataVersionExportDataVersionsDTO'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1alpha/data/data-version-exports/exports:
    get:
      tags:
        - DataVersionExportV1Alpha
      summary: Retrieve the details of all data version exports
      description: |-
        This API allows you to retrieve the information for all available data version exports.
         **Note:** Data version exports are available for 14 days after export job completes.

         **Note:** This API is in **alpha**. While in alpha, APIs may change in a breaking way without notice; functionality may be removed, and no deprecation notices will be issued.
         If you are interested in using this API, please contact your Customer Success Manager (CSM).
      operationId: DataVersionExportV1Alpha_GetAvailableExports
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataVersionExportsDTO'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1alpha/data/data-version-exports/exports/{exportUuid}:
    get:
      tags:
        - DataVersionExportV1Alpha
      summary: Retrieve the details of a data version export.
      description: |-
        This API allows you to retrieve information for a specific data version export.
         **Note:** Data version exports are available for 14 days after export job completes.

         **Note:** This API is in **alpha**. While in alpha, APIs may change in a breaking way without notice; functionality may be removed, and no deprecation notices will be issued.
         If you are interested in using this API, please contact your Customer Success Manager (CSM).
      operationId: DataVersionExportV1Alpha_GetExport
      parameters:
        - name: exportUuid
          in: path
          description: The unique identifier of the data version export.
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataVersionExportsDTO'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1alpha/data/data-version-exports/jobs:
    post:
      tags:
        - DataVersionExportV1Alpha
      summary: Schedule a data version export job
      description: |-
        This API allows you to schedule a data version export job. The job schedules immediately and will begin when resources are available. The response returns a `jobUuid` that you can use to check the export job status.

         **Note:** There is a limit of 10 export jobs per tenant per day.

         **Note:** This API is in **alpha**. While in alpha, APIs may change in a breaking way without notice; functionality may be removed, and no deprecation notices will be issued.
         If you are interested in using this API, please contact your Customer Success Manager (CSM).
      operationId: DataVersionExportV1Alpha_ScheduleExportJob
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataVersionExportScheduleJobRequestDTO'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataVersionExportScheduleJobResponseDTO'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1alpha/data/data-version-exports/jobs/{jobUuid}:
    get:
      tags:
        - DataVersionExportV1Alpha
      summary: Retrieve a data version export job's status
      description: |-
        This API allows you to retrieve the status of a data version export job. After the job completes successfully, this endpoint returns an `exportUuid` that you can use to retrieve the export information and download export files.

         **Note:** This API is in **alpha**. While in alpha, APIs may change in a breaking way without notice; functionality may be removed, and no deprecation notices will be issued.
         If you are interested in using this API, please contact your Customer Success Manager (CSM).
      operationId: DataVersionExportV1Alpha_GetExportJobStatus
      parameters:
        - name: jobUuid
          in: path
          description: The unique identifier of the data version export job.
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataVersionExportJobStatusDTO'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1alpha/data/data-version-exports/exports/{exportUuid}/files/{fileId}:
    get:
      tags:
        - DataVersionExportV1Alpha
      summary: Download a file from a data version export.
      description: |-
        This API allows you to download a file from a data version export.
        Data version export files are in CSV format, compressed with gzip.
      operationId: DataVersionExportV1Alpha_DownloadFile
      parameters:
        - name: exportUuid
          in: path
          description: The unique identifier of the data version export.
          schema:
            type: string
        - name: fileId
          in: path
          description: The unique integer identifier of the file within the data version export.
          schema:
            type: integer
      responses:
        "200":
          description: File contents
          content:
            application/gzip:
              schema:
                type: string
                format: binary
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
components:
  schemas:
    DataVersionExportColumnDTO:
      type: object
      properties:
        name:
          type: string
          description: The column's name.
        dataType:
          type: string
          description: The column's data type. Possible data types are string, integer, number, date, Boolean.
        allowsNull:
          type: boolean
          description: If `true`, the column allows null values.
        isPrimaryKeyComponent:
          type: boolean
          description: If `true`, the column is part of the primary key.
    DataVersionExportDTO:
      type: object
      properties:
        uuid:
          type: string
          description: The unique identifier of the data version export. Must be a valid UUID.
        timestamp:
          type: string
          description: The date that the data version export was generated, in milliseconds since 1970-01-01T00:00:00Z.
        dataVersionNumber:
          type: string
          description: The data version number for which the export was generated.
        baseDataVersionNumber:
          type: string
          description: The baseline data version number for which the export was generated. If specified, the export is a delta of the differences between `dateVersionNumber` and `baseDataVersionNumber`. If empty, a full export is generated for `dataVersionNumber`.
        tables:
          type: array
          items:
            $ref: '#/components/schemas/DataVersionExportTableDTO'
          description: Information about the tables in the export.
        newTables:
          type: array
          items:
            type: string
          description: Tables that exist in `dataVersionNumber` but did not exist in `baseDataVersionNumber`.
        deletedTables:
          type: array
          items:
            type: string
          description: Tables that do not exist in `dataVersionNumber` but did exist in `baseDataVersionNumber`.
    DataVersionExportDataVersionSummaryDTO:
      type: object
      properties:
        dataVersion:
          type: string
          description: The data version number.
        dataCategory:
          type: string
          description: The data category that the data version belongs to. If empty, the data version belongs to the default data category.
        created:
          type: string
          description: The date that the data version was generated, in milliseconds since 1970-01-01T00:00:00Z.
    DataVersionExportDataVersionsDTO:
      type: object
      properties:
        dataVersions:
          type: array
          items:
            $ref: '#/components/schemas/DataVersionExportDataVersionSummaryDTO'
          description: All the available data versions for the tenant's primary data category.
    DataVersionExportFileDTO:
      type: object
      properties:
        columns:
          type: array
          items:
            $ref: '#/components/schemas/DataVersionExportColumnDTO'
          description: Information about a table's columns.
        files:
          type: array
          items:
            $ref: '#/components/schemas/DataVersionExportPartFileDTO'
          description: Information about a table's files in the export.
    DataVersionExportJobStatusDTO:
      type: object
      properties:
        jobUuid:
          type: string
          description: The unique identifier of the data version export job.
        completed:
          type: boolean
          description: If `true`, the job completed successfully.
        failed:
          type: boolean
          description: If `true`, the job failed.
        exportUuid:
          type: string
          description: The unique identifier of the data version export generated by the job. If empty, the job hasn't completed successfully.
    DataVersionExportPartFileDTO:
      type: object
      properties:
        fileId:
          type: integer
          description: The unique integer identifier of the file in the data version export.
          format: int32
        filename:
          type: string
          description: The file's name.
    DataVersionExportScheduleJobRequestDTO:
      type: object
      properties:
        dataVersionNumber:
          type: string
          description: The data version number to generate an export for.
        baseDataVersionNumber:
          type: string
          description: |-
            Optional. The baseline data version number to use to generate a delta export.
             Delta exports contain the differences between `baseDataVersionNumber` and
             `dataVersionNumber`, such as anything updated, added, or removed in `dataVersionNumber`.
             If `baseDataVersionNumber` is not provided, a full export generates for `dataVersionNumber`.
    DataVersionExportScheduleJobResponseDTO:
      type: object
      properties:
        jobUuid:
          type: string
          description: The unique identifier of the scheduled data version export job.
    DataVersionExportTableDTO:
      type: object
      properties:
        name:
          type: string
          description: The name of a table in the data version export; for example, Employee or Applicant.
        commonColumns:
          allOf:
            - $ref: '#/components/schemas/DataVersionExportFileDTO'
          description: Information about the columns and files that are in both `dataVersionNumber` and `baseDataVersionNumber`. Always empty for full exports where `baseDataVersionNumber` is not specified.
        newColumns:
          allOf:
            - $ref: '#/components/schemas/DataVersionExportFileDTO'
          description: |-
            Information about new columns and files in the data version.
             If full export, lists all columns. If delta export, lists columns that exist in `dataVersionNumber` but not in `baseDataVersionNumber`.
        deletedColumns:
          type: array
          items:
            type: string
          description: Information about columns that do not exist in `dataVersionNumber` but did exist in `baseDataVersionNumber`.
    DataVersionExportsDTO:
      type: object
      properties:
        dataVersionExports:
          type: array
          items:
            $ref: '#/components/schemas/DataVersionExportDTO'
          description: Information about data version exports.
    GoogleProtobufAny:
      type: object
      properties:
        '@type':
          type: string
          description: The type of the serialized message.
      additionalProperties: true
      description: Contains an arbitrary serialized message along with a @type that describes the type of the serialized message.
    Status:
      type: object
      properties:
        localizedMessage:
          type: string
          description: Localized error message describing the root cause of the error.
        errorCode:
          type: string
          description: Error classification.
        message:
          type: string
          description: Not used.
        rci:
          type: string
          description: Optional root cause identifier.
        userError:
          type: boolean
          description: Indicates whether the error is a user error.
      description: The response structure for errors.
  securitySchemes:
    CookieAuth:
      type: apiKey
      name: VisierASIDToken
      in: cookie
    ApiKeyAuth:
      type: apiKey
      name: apikey
      in: header
    BearerAuth:
      type: http
      scheme: bearer
    OAuth2Auth:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: /v1/auth/oauth2/authorize
          tokenUrl: /v1/auth/oauth2/token
          scopes:
            read: Grants read access
            write: Grants write access
        password:
          tokenUrl: /v1/auth/oauth2/token
          scopes:
            read: Grants read access
            write: Grants write access
tags:
  - name: DataVersionExportV1Alpha
security:
  - ApiKeyAuth: []
    BearerAuth: []
  - ApiKeyAuth: []
    CookieAuth: []
  - ApiKeyAuth: []
    OAuth2Auth: []
